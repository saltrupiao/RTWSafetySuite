# RTW Safety Suite
A comprehensive, multi-modular product suite designed to keep workers safe when a company returns to the office after the COVID-19 pandemic. The first module is a web-based symptom reporting dashboard, as well as an administrative team dashboard to monitor, report, and take appropriate action. The second module is on-site hardware with a distance tracking algorithm implemented form a third party for our use case.

## Authors
Rayvin Benno, Conner Lee, Michael Reed, Carmia Smith, Sal Trupiano

## Project Demonstration Video
For a demonstration of this proejct in action, please view this YouTube video: https://www.youtube.com/watch?v=j49Ge-rbzWY

## Project Information
Developed for CSI-4999: Senior Capstone Project, School of Engineering and Computer Science, Oakland University

## How Our Project Satisfies IT Learning Objectives
* Demonstrate an ability to identify, formulate, and solve engineering problems.
  * We identified a need to create a system that assists companies who need a technology solution to aid employees and administrators in returning to the office safely. Our product’s core goal identifies a core, contemporary issue: social distancing and contact tracing. With many other aspects to keep track of when employees return to the office, companies may have an issue with keeping up with daily symptom tracking of all employees, as well as distance tracking. Our project solves this engineering problem by creating a multi-modular solution that allows companies to automate various new safety procedures that were introduced into daily office life, as a result of COVID-19.
* Demonstrate an ability to design a system, component, or process to meet desired needs within realistic constraints such as economic, environmental, social, political, ethical, health and safety, manufacturability, and sustainability.
  * Our project meets the desired needs of companies within the mentioned realistic constraints. We wanted this application to be accessible to any company that desires to implement it. With this factor in mind, we decided to develop this project in modules. Module 1 requires only a web server and LAMP stack to function, and can be outsourced to a cloud server, or insourced on their own personal infrastructure. Module 2, which provides the on-site distancing tracking, can be implemented/purchased separately, as this requires separate hardware, like a mid-range GPU such as an NVIDIA GTX 1060. This gives prospective companies flexibility, and can allow them to implement a part, or the entire project, depending on realistic economic and ethical constraints. For example, if a company did not feel comfortable tracking social distancing between employees, they would simply not procure the second project module. In terms of accounting for realistic economic constraints, we decided to move our Module 2 from livestreaming the distancing feed to recording 30 second bursts of analyzed video and posting that to the website. This is because analyzing video and livestreaming it in real-time is resource intensive and procuring the hardware necessary to do so may not be realistic or practical for many companies looking for a cost-effective solution. With the growing need for contact tracing, this application will be very sustainable well into the future, and can be used for other aspects as well, such as contact tracing for events. In terms of health and safety, we designed our project to promote health and safety at its core, in accordance with our product goal. We designed our system with the concept in mind that companies which implement our project foster a culture where their employees are committed to the greater good of their fellow employee and are comfortable with reporting symptoms to prevent any adverse situations from arising.
* Demonstrate an ability to design and conduct experiments, as well as to analyze and interpret data.
  * Throughout the project, we have employed many rounds of testing to ensure that our features work as designed. For Module 1, we conducted numerous Usability Tests, formulated user stories, and executed those tests on the user stories to ensure everything in our project meets our Definition of Done, as well as to find any lingering issues that may be presented. Those UX testing results can be found in our Sprint Review Six submission document (attached to this GitHub branch). In addition to the UX testing, we also conducted testing and experimentation to ensure that our system would run well with a standard, realistic number of accounts.
  * Regarding Module 2, we conducted many experiments and rounds of testing, both with hardware and software. In terms of testing with hardware, we sourced an algorithm from PyImageSearch, and tested implementation on both an NVIDIA Jetson Nano, as well as a desktop computer with higher-powered graphics. When we tested with the Jetson Nano, we encountered very slow performance with the algorithm we chose to use. We tested every aspect of the hardware board, such as the type of MicroSD card and the types of images used. As a result of this testing, we decided to implement the chosen OpenCV algorithm on a desktop computer with an NVIDIA GTX 1060 card. Due to unprecedented GPU supply shortages, we were unable to procure additional cards to determine a “minimum requirement” threshold, we have a hypothesis that we can easily run this on a graphics card like a NVIDIA GT 710. This allowed for a significant performance improvement, and the installation of our CUDA drivers was much smoother on this run. In terms of testing software, we had to tweak the algorithm we used to fit inside our environment. We encountered issues during the testing where downloaded videos would process properly in our algorithm with the default configuration settings, but videos captured from our webcam would not. We believe that this is a result of encoding issues with how Ubuntu captures and saves video footage from the webcam. After running many test videos captured from our webcam and downloaded from YouTube, along with reviewing the distancing data the algorithm produced, we tweaked the algorithm settings, such as raising the minimum pixel distance threshold, and ended up with a successful implementation where the algorithm can recognize the distance between two objects. As a result of our extensive algorithm testing, we also came to the conclusion that this algorithm does not properly do depth perception for distancing, so our use case is for tracking employees that are side-to-side.
* Demonstrate an ability to use the techniques, skills, and modern engineering tools necessary for engineering practice.
  * For Module 1, this project utilizes the following web and computing frameworks: Google Cloud Compute Engine Virtual Machine (Ubuntu Server OS), Apache Web Server, MySQL Database & PHPMyAdmin (for accessing/editing the database), and HTML & PHP for all webpages. Utilizing these web frameworks and the Google Cloud Platform to host a virtual machine web server allowed for swift development of Module 1. We used our knowledge of cloud firewalls, cloud networking, and web server management to properly set up our infrastructure and develop our project efficiently.
  * For the development of Module 2, the project utilizes the following engineering tools, softwares, and frameworks: Ubuntu 18.04 LTS with an NVIDIA GTX 1060 graphics card and a Logitech C920s webcam, the Social Distance Detector Algorithm sourced from PyImageSearch (in References below), Python 3, OpenCV, CUDA (with cuDNN), Numpy, Scipy, and the YOLO Object Detection library to process and interpret recognition of people in an efficient manner. In addition, we used the Command Line with VLC Media Player, along with a custom-made Python script to capture the video from our webcam every thirty seconds from the webcam using VLC Media Player, passes the captured video to the distancing algorithm, and sends it to our web server via RSync to be displayed to the user as a security feed. We sourced our algorithm from PyImageSearch and implemented it with our own use case on our desktop hardware. We utilized proper engineering techniques to install the correct drivers to allow OpenCV and CUDA to take advantage of our dedicated GPU while processing videos.
  * Finally, for both modules, our team used GitHub for version control and to manage our code files, Slack for team communications, as well as Zoom for Sprint meetings that were held twice a week.
* Demonstrate an ability to apply knowledge of mathematics, science, and engineering.
  * The project utilizes machine learning and mathematics with a third-party algorithm from PyImageSearch that uses trained data to recognize a person to calculate the pixel distances between each other. In this algorithm, it uses pixels per inch to get that ratio of 6 feet between two people, we calculated that there needs to be 450 pixels per square inch, since we have this in the form of inches - we can now calculate that into 6 feet, which is 72 inches between to two people (a.k.a their centroids), from what the video picks up to get the proper social safe distance from one person to another. The video resolution and type of video encoding will depend on the DPI for the calculation to properly work. The project also uses the latest scientific recommendations from the CDC to determine if an employee should or should not come to work, for that given day/time period.
* Demonstrate an understanding of professional and ethical responsibility.
  * Our project is designed with privacy in mind. Reporting data is only viewable by administrators of the company that are designated to view the data, and users are prevented from seeing other people’s health information. To further increase privacy for everyone using the application, all user passwords are salted and hashed, so even the administrators are unable to see user passwords. We realize that health data privacy is an issue that many people are concerned about. We designed our application to be self-hosted for the users that choose it, so that they have full and complete control over their own data, and do not have to agree to terms of service from large technology companies that may result in them giving up their right to privacy.
  * In terms of professional responsibility, we understand that certain places of work may not wish to monitor their employees distance using cameras. This is another reason why we implemented this project in modules, so if they wish to forgo the distance tracking, they may still do so while gaining the functionality of our web reporting dashboard system.
* Demonstrate the broad education necessary to understand the impact of engineering solutions in a global, economic, environmental, and societal context
  * Our project encompasses the broad education necessary to understand the impact our engineering solution provides. In terms of an economic context, our project was designed to impact users by allowing them to automate various reporting duties that were recently introduced after they return to the office. This can reduce staffing costs and reduce the delegation of extra responsibilities onto the employees. In terms of a societal context, the application was designed to impact workers by providing critical symptom data of employees to company management so that they will know whether to stay home to keep their fellow employees safe. In terms of an environmental context, our project aims to digitize this process to reduce the usage of paper. Finally, the project, by collecting and notifying employees whether they are able/unable to return to work or not, can provide an impact on a global scale with regard to minimizing spread and thus the number of employees able to work and communicate with their employees and clients across the globe.
* Demonstrate a knowledge of contemporary issues 
  * We recognize the current issue of COVID-19 and the measures taken to prevent further spread of any harmful diseases, mainly through detecting instances of improper social distancing. We understand that returning to work safely has become a high priority in recent months, and that companies world-wide are looking for solutions to mediate the issue of COVID-19 spreading. This solution can provide an open-source, easily accessible way to help employees return to work safely.
* Demonstrate a recognition of the need for, and an ability to engage in life-long learning
  * This project demonstrates a recognition of the need for, and an ability to engage in life-long learning because our group embarked on a development project to implement an already existing OpenCV distancing algorithm into our solution. None of us have had extensive experience with OpenCV or implementing it, however, we recognize that it is very important to be able to learn and successfully implement existing solutions using new technologies such as OpenCV to not only improve our product and our users, but to also expand our knowledge and learn new tools and techniques.



## Supported Operating Systems
* Windows
* macOS
* Linux

## Project References
* PyImageSearch/Adrian Rosebrock; OpenCV Social Distancing Detector: https://www.pyimagesearch.com/2020/06/01/opencv-social-distancing-detector/
* VLC Recording Command: https://unix.stackexchange.com/questions/58526/trouble-getting-vlc-to-record- from-the-webcam-via-command-line
* MySQL DB Connection Logic: https://www.w3schools.com/php/php_mysql_insert.asp
* NVIDIA CUDA/DNN Module Installation Tutorial: https://cuda-
chen.github.io/image%20processing/programming/2020/02/22/build-opencv-dnn-module-with-nvidia-gpu- support-on-ubuntu-1804.html
